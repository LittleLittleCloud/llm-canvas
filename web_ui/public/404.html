<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>LLM Canvas</title>
    <script type="text/javascript">
      // Single Page Apps for GitHub Pages
      // This script handles 404 redirects for client-side routing

      // Get the current location
      var l = window.location;

      // For GitHub Pages project sites (username.github.io/repo-name/...)
      // we need to preserve the repo name and redirect the rest
      var pathSegments = l.pathname.split("/").filter(function (segment) {
        return segment !== "";
      });

      // The first segment should be the repo name (llm-canvas)
      var repoName = pathSegments[0] || "";

      // Everything after the repo name becomes the client-side route
      var clientRoute = pathSegments.slice(1).join("/");

      // Only redirect if there's actually a client route to handle
      if (clientRoute) {
        // Build the redirect URL: /repo-name/?/client-route
        var baseUrl =
          l.protocol +
          "//" +
          l.hostname +
          (l.port ? ":" + l.port : "") +
          "/" +
          repoName +
          "/";

        var queryString = "?/" + clientRoute;

        // Preserve any existing query parameters (encode & as ~and~)
        if (l.search) {
          queryString += "&" + l.search.slice(1).replace(/&/g, "~and~");
        }

        // Preserve hash
        var hash = l.hash || "";

        var redirectUrl = baseUrl + queryString + hash;

        // Redirect to the main app with the route in query parameters
        l.replace(redirectUrl);
      }
    </script>
  </head>
  <body>
    <!-- This page handles 404 redirects for GitHub Pages SPA -->
  </body>
</html>
